<%- include('../partials/head') %>
<%- include('../partials/nav') %>

<div class="container page" style="max-width: 980px;">
  <div class="d-flex justify-content-between align-items-start gap-3 mb-3">
    <div>
      <h1 class="h3 mb-1"><%= food.name %></h1>
      <% if (food.description) { %>
        <p class="text-muted mb-0"><%= food.description %></p>
      <% } %>
    </div>

    <div class="d-flex gap-2">
      <a class="btn btn-outline-primary" href="/foods/<%= food._id %>/edit">Edit</a>
      <form action="/foods/<%= food._id %>?_method=DELETE" method="POST">
        <button class="btn btn-outline-danger" type="submit">Delete</button>
      </form>
    </div>
  </div>

  <% if (food.imageUrl) { %>
    <img src="<%= food.imageUrl %>" class="recipe-hero-img mb-4" alt="recipe image">
  <% } %>

  <div class="row g-3">
    <div class="col-12 col-lg-5">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <h2 class="h5">Ingredients</h2>
          <% if (!food.ingredients.length) { %>
            <p class="text-muted mb-0">No ingredients yet.</p>
          <% } else { %>
            <ul class="mb-0">
              <% food.ingredients.forEach(i => { %>
                <li><%= i.name %></li>
              <% }) %>
            </ul>
          <% } %>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-7">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <h2 class="h5">Instructions</h2>
          <p style="white-space: pre-line;"><%= food.instructions %></p>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3">
    <a href="/foods" class="text-decoration-none">&larr; Back to recipes</a>
  </div>
</div>

<%- include('../partials/footer') %>
