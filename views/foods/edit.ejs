<%- include('../head') %>
<%- include('../nav') %> 

<link rel="stylesheet" href="/stylesheets/style.css">

<div class="container page" style="max-width: 820px;">
  <h1 class="h3 mb-3">Edit Recipe</h1>

  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <form action="/users/<%= user._id %>/foods/<%= food._id %>?_method=PUT" method="POST" enctype="multipart/form-data"></form>
        <div class="mb-3">
          <label class="form-label">Recipe Title</label>
          <input class="form-control" name="name" value="<%= food.name %>" required />
        </div>

        <div class="mb-3">
          <label class="form-label">Short Description (optional)</label>
          <input class="form-control" name="description" value="<%= food.description || '' %>" />
        </div>

        <div class="mb-3">
          <label class="form-label">Ingredients (one per line)</label>
          <textarea class="form-control" name="ingredientsText" rows="6"><%= food.ingredients.map(i => i.name).join('\n') %></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Instructions</label>
          <textarea class="form-control" name="instructions" rows="8" required><%= food.instructions %></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Replace Image (optional)</label>
          <input class="form-control" type="file" name="image" accept="image/*" />
          <% if (food.imageUrl) { %>
            <small class="text-muted d-block mt-2">Current image:</small>
            <img src="<%= food.imageUrl %>" class="recipe-hero-img mt-2" alt="current recipe image">
          <% } %>
        </div>

        <div class="d-flex gap-2">
          <button class="btn btn-primary" type="submit">Save Changes</button>
          <a class="btn btn-outline-secondary" href="/users/<%=user?._id%>/foods">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>





<%- include('../footer') %>


